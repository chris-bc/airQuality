<!DOCTYPE html>
<html><head>
    <title>geoSKIES - Geospatial Air Quality Information</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="bootstrap.min.js"></script><script src="Chart.bundle.min.js"></script>
    <script src="skiesUtils.js"></script><script src="geoUtils.js"></script>
    <script src="https://unpkg.com/@google/markerclustererplus@4.0.1/dist/markerclustererplus.min.js"></script>
</head>
<body data-spy="scroll" data-target="#myNav" data-offset="70" style="position:relative;">
    <nav id="myNav" class="navbar navbar-light bg-light navbar-expand-md fixed-top">
        <div class="navbar-header">
            <button type="button" class="navbar-toggler mr-sm-2" data-toggle="collapse" data-target="#myNavBar" aria-controls="myNavBar" aria-expanded="false" aria-label="Toggle Navigation">
            <span class="navbar-toggler-icon"></span></button>
            <a class="navbar-brand mr-sm-2" href="#">geoSKIES</a></div>
        <div class="collapse navbar-collapse" id="myNavBar">
            <ul class="navbar-nav"><li class="nav-item"><a class="nav-link" href="#navMap">Sensor Map</a></li>
                <li class="nav-item"><a class="nav-link" href="#navData">Sensor Data</a></li>
                <li class="nav-item"><a class="nav-link" href="#navChart">Sensor Charts</a></li>
                <li class="nav-item"><a class="nav-link" href="#navAbout">About</a></li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropDown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Other Pages
                    </a><div class="dropdown-menu" area-labelledBy="navbarDropDown" id="navbarDropLinks" name="navbarDropLinks">
                        <a class="dropdown-item" href="blueskies.pl" target="_blank">blueSKIES</a>
                        <a class="dropdown-item" href="ozsjies.pl" target="_blank">ozSKIES</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" target="_blank" href="http://www.bennettscash.id.au">bennettscash</a>
                </div></li></ul>
        </div></nav>
    <div class="container-fluid">
        <div class="row" id="navMap">
            <table id="latestData" class="d-none"></table>
                <div class="d-flex w-100 flex-column flex-md-row">
                    <div class="d-flex flex-column w-100">
                        <small><div class="d-flex flex-row w-100 flex-grow-1 justify-content-between px-1 align-items-center" style="background-color: #f8f9fa">
                            <div class="form-check form-check-inline">
                                <label class="form-check-label mr-1" for="hideFaulty">Hide faulty</label>
                                <input class="form-check-input" type="checkbox" id="hideFaulty" value="1" checked/>
                            </div>
                            <div class="mr-1">Show:</div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="show" id="showLatest" value="latest" checked onchange="timeEnableDisable();"/>
                                <label class="form-check-label" for="showLatest">Latest</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="show" id="limitTime" value="historical" onchange="timeEnableDisable();"/>
                                <label class="form-check-label" for="limitTime">Historical</label>
                            </div>
                            <div><select class="custom-select custom-select-sm" id="timeNum" disabled onchange="updateTime();">
                                <option selected value="1">1</option>
                            </select></div>
                            <div><select class="custom-select custom-select-sm mr-1" id="timeType" disabled onchange="updateMapTimeType();">
                                <option selected value="hours">Hours</option>
                                <option value="days">Days</option>
                                <option value="weeks">Weeks</option>
                                <option value="months">Months</option>
                                <option value="years">Years</option>
                            </select></div>
                            <div>For: </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="dataSel" id="selected" value="selected" onclick="displayUnitWarningIfNeeded();"/>
                                <label class="form-check-label" for="selected">Selected</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="dataSel" id="visible" value="visible" onclick="displayUnitWarningIfNeeded();"/>
                                <label class="form-check-label" for="visible">Visible</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="dataSel" id="all" value="all" checked onclick="displayUnitWarningIfNeeded();"/>
                                <label class="form-check-label" for="all">All</label>
                            </div>
                            <button type="button" class="btn btn-primary btn-sm">Apply</button>
                        </div></small>
                        <div id="timeWarn" class="alert alert-danger d-none mb-0" role="alert">
                            <strong>Caution!</strong> Disabling the time filter may result in a very
                            large amount of data being downloaded from the server. Loading the page
                            with this setting may take some time.
                        </div>
                        <div class="w-100 h-100" id="map"></div>
                    </div>
                    <div id="mapSensors" style="overflow:auto;">
                        <div class="list-group flex-row flex-md-column" id="mapSensorList"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="container" id="navData">
            <div class="table-responsive">
                <table id="dataTable" class="table table-bordered table-striped"></table>
            </div>
        </div>
        <div class="container" id="navChart">
            <div class="row justify-content-center"><h4 class="text-center">Air Quality</h4></div>
            <div class="row mb-3"><canvas id="pmChart"></canvas></div>
            <div class="row justify-content-center"><h4 class="text-center">Temperature &amp; Humidity</h4></div>
            <div class="row mb-3"><canvas id="envChart"></canvas></div>        
        </div>
        <div class="container" id="navAbout">
            <div class="row text-center"><h3>About</h3></div>
            <div class="row"><p>This page combines the data sources presented in blueSKIES and ozSKIES with a focus on
                presenting data geospatially.
                </p><p>From a technical perspective the development of these pages - blueSKIES, followed by ozSKIES, and finally 
                geoSKIES - has included a transition from predominantly server-side functionality to an increased reliance on
                client-side functionality. geoSKIES is being built entirely with HTML, JavaScript and CSS, with server components
                used only as external modules to retrieve data from the underlying database. While this is largely an exercise in 
                learning for me, I hope the resulting functionality will be of use. In the spirit of paying it forward - with these 
                pages enabled by KOALA's exclusive use of client-side processing, this also makes the underlying data and APIs
                available to other developers who would like to do more with the data.</p>
                <p>blueSKIES, ozSKIES and geoSKIES are <a href="https://github.com/chris-bc/airQuality">hosted on GitHub</a>.
                Feel free to develop them further and send me a pull request.</p>
                <p><font size="-1">Built by <a href="mailto:chris@bennettscash.id.au">Chris Bennetts-Cash</a>, 2020.
                <a href="http://www.bennettscash.id.au" target="_blank">http://www.bennettscash.id.au</a></font></p>
            </div>
        </div>
    </div>
    <script async defer src='https://maps.googleapis.com/maps/api/js?key=APIKEY&libraries=visualization&callback=initMap'></script>
</body></html>
